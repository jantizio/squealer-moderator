<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="public/vulture.svg" />
    <link rel="stylesheet" href="public/modern-normalize.min.css" />
    <link rel="stylesheet" href="public/css/global.css" />
    <link rel="stylesheet" href="public/css/profile.css" />
    <title>Moderator Dashboard</title>
  </head>
  <body>
    <div id="root">
      <navbar-c></navbar-c>
      <main>
        <h1>Profilo</h1>
        <div class="profile">
          <div class="profile__image">
            <img alt="immagine di profilo" />
          </div>
          <div class="profile__info">
            <h2 class="user-card__name">{user.firstname} {user.lastname}</h2>
            <p class="user-card__username">{user.username}</p>
            <p class="user-card__email">{user.email}</p>
            <p class="user-card__type">{user.type}</p>
            <p class="user-card__smm">{user.SMM}</p>
            <p class="user-card__subscriptions">{user.subscriptions}</p>
          </div>
        </div>
      </main>
      <aside></aside>
    </div>
    <script type="module">
      import { getMe } from './src/api/users.mjs';
      import {} from './src/components/navbar/navbar.mjs';

      const user = await getMe();

      document.querySelector('.profile__image img').src = user.propic;
      document.querySelector('.user-card__username').textContent =
        user.username;
      document.querySelector(
        '.user-card__name'
      ).textContent = `${user.firstname} ${user.lastname}`;
      document.querySelector('.user-card__email').textContent = user.email;
      document.querySelector('.user-card__type').textContent = user.type;

      if (user.SMM)
        document.querySelector(
          '.user-card__smm'
        ).textContent = `Social Media Manager: ${user.SMM}`;
      else document.querySelector('.user-card__smm').classList.add('hidden');

      if (user.subscriptions.length > 0)
        document.querySelector('.user-card__subscriptions').textContent =
          user.subscriptions.join(', ');
      else
        document
          .querySelector('.user-card__subscriptions')
          .classList.add('hidden');
    </script>
  </body>
</html>
